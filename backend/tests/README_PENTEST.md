# ğŸ§ª Guide des Tests de PÃ©nÃ©tration

## ğŸ“‹ Vue d'ensemble

Ce dossier contient les scripts de test de pÃ©nÃ©tration et de vÃ©rification de sÃ©curitÃ© pour l'application ESA.

## ğŸ” Scripts Disponibles

### 1. `pentest.py` - Tests de PÃ©nÃ©tration Complets

Suite complÃ¨te de tests automatisÃ©s pour vÃ©rifier la sÃ©curitÃ© de l'application.

**Tests inclus :**
- âœ… Injection SQL sur le login
- âœ… Injection XSS
- âœ… Protection contre brute force
- âœ… Rate limiting
- âœ… Contournement d'authentification
- âœ… Contournement d'autorisation
- âœ… Path traversal
- âœ… Protection CSRF
- âœ… Headers de sÃ©curitÃ©
- âœ… Validation de la force des mots de passe
- âœ… Gestion des sessions
- âœ… Validation des entrÃ©es

**Utilisation :**
```bash
cd backend
python tests/pentest.py
```

**RÃ©sultats :**
- Affichage en temps rÃ©el dans la console
- Sauvegarde dans `pentest_results.json`

### 2. `security_check.py` - VÃ©rifications AutomatisÃ©es

VÃ©rifie la configuration et le code pour dÃ©tecter les problÃ¨mes de sÃ©curitÃ©.

**VÃ©rifications :**
- âœ… Hashage des mots de passe (bcrypt vs SHA-256)
- âœ… Protection contre injection SQL
- âœ… Secrets dans le code
- âœ… Permissions des fichiers
- âœ… Configuration CORS
- âœ… Configuration JWT
- âœ… Validation des entrÃ©es

**Utilisation :**
```bash
cd backend
python tests/security_check.py
```

**RÃ©sultats :**
- Affichage des problÃ¨mes dÃ©tectÃ©s
- Sauvegarde dans `security_check_results.json`

## ğŸš€ ExÃ©cution ComplÃ¨te

```bash
# 1. Installer les dÃ©pendances
pip install -r requirements.txt
pip install -r requirements_security.txt

# 2. DÃ©marrer le serveur (dans un terminal)
python app.py

# 3. ExÃ©cuter les tests (dans un autre terminal)
cd backend

# Tests de pÃ©nÃ©tration
python tests/pentest.py

# VÃ©rifications de sÃ©curitÃ©
python tests/security_check.py
```

## ğŸ“Š InterprÃ©tation des RÃ©sultats

### Status des Tests

- âœ… **PASS** : La protection fonctionne correctement
- âŒ **FAIL** : VulnÃ©rabilitÃ© dÃ©tectÃ©e, action requise
- âš ï¸ **WARN** : Avertissement, vÃ©rification recommandÃ©e

### Niveaux de SÃ©vÃ©ritÃ©

- ğŸ”´ **CRITIQUE** : Doit Ãªtre corrigÃ© immÃ©diatement
- ğŸŸ¡ **MOYEN** : Doit Ãªtre corrigÃ© avant la production
- ğŸŸ  **FAIBLE** : AmÃ©lioration recommandÃ©e

## ğŸ”§ Configuration

### Modifier l'URL de Test

Dans `pentest.py`, modifier :
```python
BASE_URL = "http://localhost:5000/api"
```

### Ajouter des Tests PersonnalisÃ©s

CrÃ©er une nouvelle mÃ©thode dans la classe `PentestSuite` :

```python
def test_custom(self):
    """Test personnalisÃ©"""
    print("\nğŸ” Test: Mon test personnalisÃ©")
    # Votre code de test ici
    self.log_result("Custom Test", 'PASS', 'DÃ©tails du test')
```

Puis l'ajouter dans `run_all_tests()`.

## ğŸ“ Exemples de Tests

### Test d'Injection SQL

```python
def test_sql_injection(self):
    payloads = ["' OR '1'='1", "admin'--"]
    for payload in payloads:
        response = self.session.post(
            f"{self.base_url}/auth/login",
            json={'username': payload, 'password': 'test'}
        )
        # VÃ©rifier la rÃ©ponse
```

### Test de Rate Limiting

```python
def test_rate_limit(self):
    for i in range(10):
        response = self.session.post(
            f"{self.base_url}/auth/login",
            json={'username': 'admin', 'password': 'wrong'}
        )
        if response.status_code == 429:
            # Rate limit actif
            break
```

## âš ï¸ Avertissements

1. **Ne pas exÃ©cuter en production** sans autorisation
2. **Utiliser un environnement de test** dÃ©diÃ©
3. **Ne pas partager les rÃ©sultats** publiquement si des vulnÃ©rabilitÃ©s sont trouvÃ©es
4. **Corriger immÃ©diatement** les vulnÃ©rabilitÃ©s critiques

## ğŸ”„ Mise Ã  Jour des Tests

Les tests doivent Ãªtre mis Ã  jour rÃ©guliÃ¨rement pour :
- Couvrir les nouvelles fonctionnalitÃ©s
- Tester les nouvelles protections
- S'adapter aux nouvelles menaces

## ğŸ“ Support

Pour toute question sur les tests de sÃ©curitÃ© :
1. Consulter `SECURITE.md` pour la documentation complÃ¨te
2. VÃ©rifier les logs pour plus de dÃ©tails
3. Contacter l'Ã©quipe de sÃ©curitÃ©

---

**DerniÃ¨re mise Ã  jour** : AprÃ¨s implÃ©mentation des mesures de sÃ©curitÃ©


